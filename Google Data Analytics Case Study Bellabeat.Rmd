---
title: 'Google Data Analytics Case Study: Bellabeat'
author: "Muhammad Farhan"
date: "2022-11-16"
output:
  html_document: default
  pdf_document: default
---
# Case Study Bellabeat: How Can a Wellness Technology Company Play It Smart?

## Introduction
This case study is done as a part of **Google Data Analytics Professional Certificate Capstone Project**.
In this case study, I will perform many real-world tasks of a junior data analyst. I will imagine I am working for Bellabeat, a high-tech manufacturer of health-focused products for women, and meet different characters and team members. In order to answer the key business questions, I will follow the steps of the data analysis process: ask, prepare, process, analyze, share, and act.

For detailed Background on the case study click the [link](https://github.com/MFN-998/Case-Study-Bellabeat/blob/main/Case-Study-2_How-can-a-wellness-technology-company-play-it-smart.pdf)


## Ask

### Background
Bellabeat is a successful small company, but they have the potential to become a larger player in the global smart device market. Urška Sršen, co-founder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company. I have been asked to focus on one of Bellabeat’s products and analyze smart device data to gain insight into how consumers are using their smart devices. The insights I discover will then help guide marketing strategy for the company. I will present my analysis to the Bellabeat executive team along with my high-level recommendations for Bellabeat’s marketing strategy. The key stakeholders for this case study are:

1. **Urška Sršen**: Bellabeat’s cofounder and Chief Creative Officer.
2. **Sando Mur**: Mathematician and Bellabeat’s cofounder; key member of the Bellabeat executive team.
3. **Bellabeat marketing analytics team**: A team of data analysts responsible for collecting, analyzing, and reporting data that helps guide Bellabeat’s marketing strategy. You joined this team six months ago and have been busy learning about Bellabeat’’s mission and business goals — as well as how you, as a junior data analyst, can help Bellabeat achieve them

The main business questions to which I have to find solutions to through my analysis are:

1. What are some trends in smart device usage?
2. How could these trends apply to Bellabeat customers?
3. How could these trends help influence Bellabeat marketing strategy?


## Prepare
The data which is provided for the analysis is from kaggle in csv files, which is publicily available on the following link: [FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit)
The data is made publicily available by Mobius under CC0: Public Domain License. This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.

A good way to check whether their are any issues with the data is to see that the data is **ROCC** or not. ROCC stands for **R**eliable, **O**rignal, **C**omprehensive, **C**urrent and **C**ited. We will check the credibility of our data on this principle.

**Reliable**: I am sure that the information I am getting is from a real-world source but I am not sure whether the data is biased or not as I do not the criteria on which the data was collected.

**Orignal**: The data is from Amazon Mechanical Turk, a third party source.

**Comprehensive**: The data can provide answer to most of the questions which are the focus of analysis.

**Current**: The data is not current, it's outdated and almost 6 years old (03.12.2016-05.12.2016).

**Cited**: The data was collected by a third party, therefore I do not know.

For this analysis there were 18 csv files which contained the following data: Daily activity, Daily calories, Daily intensities, Daily steps, heartrate seconds, hourly calories, hourly intensities, hourly steps, minute calories narrow, minute calories wide, minute intensities narrow, minute intensities wide, minute METs narrow, minute METs wide, minute sleep, minute steps narrow, minute steps wide, sleep day, weight log info.

I used csv files containing daily information, hourly information, sleep day information and weigh log information. I also used the data dictionary for the fitbit data to see what refers to what in the csv files. Click the [link](https://www.fitabase.com/media/1930/fitabasedatadictionary102320.pdf) to check the dictionary.


## Process
I downloaded the zipped folder containing the csv files to work locally on my laptop and unzipped the file in a new folder.

### Tools
For the analysis I used R and RStudio, as they provide wide variety of functions and packages for data cleaning, analysis and visualization all in one place.

First I installed all the packages which I will need during the analysis process:
```{r eval=FALSE, include=TRUE}
install.packages('tidyverse')
install.packages('skimr')
install.packages('janitor')
install.packages('ggplot2')
install.packages("lubridate")
```

Then load these packages to use them:
```{r}
library(tidyverse)
library(skimr)
library(janitor)
library(ggplot2)
library(readr)
library(dplyr)
library(lubridate)
```

Importing the datasets which I am going to use and assigning them names(variables):
```{r}
daily_activity <- read.csv('dailyActivity_merged.csv')
daily_calories <- read.csv('dailyCalories_merged.csv')
daily_intensities <- read.csv('dailyIntensities_merged.csv')
daily_steps <- read.csv('dailySteps_merged.csv')
sleep_day <- read.csv('sleepDay_merged.csv')
weightlog_info <- read.csv('weightLogInfo_merged.csv')
hourly_calories <- read.csv('hourlyCalories_merged.csv')
hourly_intensities <- read.csv('hourlyIntensities_merged.csv')
hourly_steps <- read.csv('hourlySteps_merged.csv')
```

Getting an overview of the data we have by using different R functions. Using sapply to apply the function to all data frames at once.
Checking Column Names:
```{r}
sapply(list(daily_activity,daily_calories,daily_intensities,daily_steps,
            sleep_day, weightlog_info, hourly_calories,hourly_intensities,
            hourly_steps), colnames)
```

Checking first six rows of the data frames we have:
```{r}
sapply(list(daily_activity,daily_calories,daily_intensities,daily_steps,
            sleep_day, weightlog_info, hourly_calories,hourly_intensities,
            hourly_steps), head)
```


Checking the structure of the data frames:
```{r}
sapply(list(daily_activity,daily_calories,daily_intensities,daily_steps,
            sleep_day, weightlog_info, hourly_calories,hourly_intensities,
            hourly_steps), str)
```


Checking for null or missing values in the data:
```{r}
sum(is.na(daily_activity))
sum(is.na(daily_calories))
sum(is.na(daily_intensities))
sum(is.na(daily_steps))
sum(is.na(sleep_day))
sum(is.na(weightlog_info))
sum(is.na(hourly_calories))
sum(is.na(hourly_intensities))
sum(is.na(hourly_steps))
```

Checking the weightlog_info data frame which contains missing values:
```{r}
view(weightlog_info)
```

After checking the data frame the 'Fat' column has 65 missing values out of 67 entries. We will drop this column as the data is not sufficient:
```{r}
weightlog_info_updated <- subset(weightlog_info, select = -Fat)
rm(weightlog_info)
```

Checking again for any null values:
```{r}
sum(is.null(daily_activity))
sum(is.null(daily_calories))
sum(is.null(daily_intensities))
sum(is.null(daily_steps))
sum(is.null(sleep_day))
sum(is.null(weightlog_info_updated))
sum(is.null(hourly_calories))
sum(is.null(hourly_intensities))
sum(is.null(hourly_steps))
```

There are no null values in the data.

Checking the real number of participants by counting unique values in ID column:
```{r}
count(daily_activity %>% distinct(Id))
count(daily_calories %>% distinct(Id))
count(daily_intensities %>% distinct(Id))
count(daily_steps %>% distinct(Id))
count(sleep_day %>% distinct(Id))
count(weightlog_info_updated %>% distinct(Id))
count(hourly_calories %>% distinct(Id))
count(hourly_intensities %>% distinct(Id))
count(hourly_steps %>% distinct(Id))
```

All the data frames contain 33 unique IDs except weightlog_info_updated and sleep_day data frames. weightlog_info_updated has 8 unique IDs and sleep_day has 24 unique IDs.

By taking into account the information up till now, I can say that the result of the analysis is not going to be a 100% representation for the whole population who uses smart devices for health wellness as the amount of data is really low and outdated.

Checking for duplicate values in data frames:
```{r}
sum(duplicated(daily_activity))
sum(duplicated(daily_calories))
sum(duplicated(daily_intensities))
sum(duplicated(daily_steps))
sum(duplicated(sleep_day))
sum(duplicated(hourly_calories))
sum(duplicated(hourly_intensities))
sum(duplicated(hourly_steps))
```

I found that the sleep_day data frame has 3 duplicated rows while other data frames do not show any duplicated rows. Therefore, I decided to remove the duplicated rows from sleep_day data frame and create a new data frame 'daily_sleep' without any duplicated values:
```{r}
daily_sleep <- sleep_day[!duplicated(sleep_day), ]
```

Checking the new data frame "daily_sleep" for any duplicate values:
```{r}
sum(duplicated(daily_sleep))
```

Also, I noticed while comparing the columns that represent a unique timestamp, the name of this column is different for our 'daily_sleep', 'daily_calories' and 'daily_intensities' dataframe compared to our daily_activity dataframe. In 'daily_sleep'', this column is called “SleepDay ', and in 'daily_calories', 'daily_steps' and 'daily_intensities' it is called 'ActivityDay' whereas the column in the daily_activity dataframe that serves to timestamp each observation is called 'ActivityDate'. So, for the sake of consistency, we will rename 'SleepDay' and 'ActivityDay' to 'ActivityDate':
```{r}
daily_sleep <-daily_sleep %>% 
  rename(ActivityDate = SleepDay)

daily_calories <-daily_calories %>% 
  rename(ActivityDate = ActivityDay)

daily_intensities <-daily_intensities %>% 
  rename(ActivityDate = ActivityDay)

daily_steps <-daily_steps %>% 
  rename(ActivityDate = ActivityDay)
```

Checking Column names:
```{r}
colnames(daily_sleep)
colnames(daily_calories)
colnames(daily_intensities)
colnames(daily_steps)
```

In the hourly Calories, intensities, and steps data frame, the date is formatted consistently, and its “ActivityHour” is incorrect as it indicated as character/string data type when I did the glimpse() function previously. We are going to fix it to standardize the data type:
```{r}
daily_activity$ActivityDate <-as.Date(daily_activity$ActivityDate, format="%m/%d/%Y")
daily_sleep$ActivityDate<- as.Date(daily_sleep$ActivityDate, format="%m/%d/%Y")
daily_calories$ActivityDate<- as.Date(daily_calories$ActivityDate, format="%m/%d/%Y")
daily_intensities$ActivityDate<- as.Date(daily_intensities$ActivityDate, format="%m/%d/%Y")
daily_steps$ActivityDate<- as.Date(daily_steps$ActivityDate, format="%m/%d/%Y")

hourly_calories$ActivityHour <- mdy_hms(hourly_calories$ActivityHour)
hourly_intensities$ActivityHour <- mdy_hms(hourly_intensities$ActivityHour)
hourly_steps$ActivityHour <- mdy_hms(hourly_steps$ActivityHour)

weightlog_info_updated$Date <- mdy_hms(weightlog_info_updated$Date)
```

For ease we will merge all the dataframes containing daily data into one and all the dataframes containing hourly data into one:
```{r}
daily_activity_calories <- merge(daily_activity, daily_calories, by=c("Id", "ActivityDate"))
daily_activity_calories_intensities <- merge(daily_activity_calories, daily_intensities, by=c("Id", "ActivityDate"))
daily_activity_calories_intensities_sleep <- merge(daily_activity_calories_intensities, daily_sleep, by=c("Id", "ActivityDate"))
daily_all_merged <- merge(daily_activity_calories_intensities_sleep, daily_steps, by=c("Id", "ActivityDate"))

hourly_calories_intensities <- merge(hourly_calories, hourly_intensities, by=c("Id","ActivityHour"))
hourly_all_merged <- merge(hourly_calories_intensities, hourly_steps, by=c("Id", "ActivityHour"))
```

Adding a column for week day and number in daily_all_merged data frame so it is easy to know on which day of the week the activity was performed:
```{r}
daily_all_merged$ActivityDay <- weekdays(as.Date(daily_all_merged$ActivityDate))
daily_all_merged$ActivityDayNum <- wday(daily_all_merged$ActivityDate, week_start = 1)
```

Checking the new data frames:
```{r}
view(daily_all_merged)
```

```{r}
view(hourly_all_merged)
```

```{r}
view(weightlog_info_updated)
```


After merging there are some duplicate columns in daily_all_merged data frame. So, I will remove the duplicated columns:
```{r}
daily_all_merged <- subset(daily_all_merged, select = -c(VeryActiveDistance.y, ModeratelyActiveDistance.y, LightActiveDistance.y, SedentaryActiveDistance.y, 
                                                         VeryActiveMinutes.y, FairlyActiveMinutes.y, LightlyActiveMinutes.y, SedentaryMinutes.y,Calories.y))
```


Removing the '.x' at the end of the columns which were duplicated in daily_all_merged:
```{r}
daily_all_merged <- daily_all_merged %>% rename("VeryActiveDistance" = "VeryActiveDistance.x", "ModeratelyActiveDistance" = "ModeratelyActiveDistance.x",
                                                "LightActiveDistance" = "LightActiveDistance.x", "SedentaryActiveDistance" = "SedentaryActiveDistance.x",
                                                "VeryActiveMinutes" = "VeryActiveMinutes.x", "FairlyActiveMinutes" = "FairlyActiveMinutes.x",
                                                "LightlyActiveMinutes" = "LightlyActiveMinutes.x", "SedentaryMinutes" = "SedentaryMinutes.x",
                                                "Calories" = "Calories.x")
```


Checking the daily_all_merged data frame:
```{r}
view(daily_all_merged)
```

Now we will use the newly formed data frames 'daily_all_megred', 'hourly_all_merged' and 'weightlog_info_updated' to answer the business questions we have and get insight fron the data.



## Analyze

```{r}
summary(daily_all_merged)
```

```{r}
summary(hourly_all_merged)
```

```{r}
summary(weightlog_info_updated)
```

Using the data gained from above, I have found following information:

 - The average total steps per day is 8515. The recommended number of steps by  Centers for Disease Control and Prevention (CDC) is 10,000 steps
 - The average total distance per day is 6.012 km.
 - The average distance the user is very active within is 1.446 km, moderately active is 0.7439 km, and lightly active is 3.791 km.
 - The average time frame they are very active within is 25.05 minutes, fairly active is 17.92 minutes and lightly active is 216.5 minutes (approximately 3.6 hours).
 - The average time they spent sedentary is 712.1 minutes (approximately 11.86 hours).
 - The average calories the average user burns a day are 2389 kCal.

 - The average total minutes asleep of the average user is 419 minutes (approximately 6.9 hours).
 - The average total time in bed is 458.5 minutes (approximately 7.6 hours). This implies that the average users spends about half an hour in bed awake.

 - The average user’s average weight is 72 kg or 158.8 pounds.
 - The average user’s average BMI is 25.19. This number represents the measure of body mass index based on the height and weight in the participant’s Fitbit.com profile. A health range of BMI is 18.5 to 24.9, which is recommended by CDC. The average BMI in this data is above the recommeded range.
(Note: The weight information is from data frame that represents data points from only 8 users.)

- The average calories burned in an hour by a user is 97.39 kCal.
- The average total steps taken in an hour by a user are 320.

## Share

**Average Steps per Day**:
```{r}
ggplot(data = daily_all_merged, aes(x=ActivityDay, y=TotalSteps)) + geom_bar(stat = "identity", fill="lightblue") + labs(title = "Average Steps taken per day" )
```

People walk the most steps on Tuesday and Saturday. One is a workday and one is a weekend day (people most probably go for a workout or some physical activity on Saturday).


**Calories Burned vs Total Steps**:
```{r}
ggplot(data = daily_all_merged, aes(x=TotalSteps, y=Calories)) + geom_point(stat = "identity", color="blue") + labs(title = "Calories Burned vs Total Steps" )
```

This plot shows a positive relation between Total steps walked and calories burned. There are a few outliers which show calories burned without any step count. This may be due to some error in recording the data.


**Time in bed vs Time Asleep**:
```{r}
ggplot(data = daily_all_merged, aes(x=TotalMinutesAsleep, y=TotalTimeInBed)) + geom_point(stat = "identity", color="aquamarine1") + geom_smooth(method = "lm") + labs(title = "Time in bed vs Time Asleep" )
```

This scatter plot, we see the relationship between the total minutes asleep and the total minutes spent in bed.
The relationship is linear as expected, but there are two clusters of users with different behavior:

1. The cluster with a total of 200 to 400 minutes asleep (3 hours to approximately 6 hours) spends between 370 and 550 min in bed in total (approximately 6 hours to 9 hours), which is close to 3 hours spent awake in bed. This leads us to the conclusion that users from this cluster have sleep difficulties, and as a result, get much less sleep than the recommended hours of sleep.

2. The cluster with a total of approximately 600 to 800 minutes asleep (10 hours to ~13 hours) spends around 900m in bed in total (15 hours), which is 1hour 40 minutes to 5 hours spent awake in bed. This cluster sleeps more (sometimes almost double) than the recommended hours of sleep.

The time in bed spent awake could be time spent on electronic devices like smartphones, laptops or TV, which affects the brain and making it harder to fall asleep, which could explain the longer time spent in bed awake.


**Sedentary Minutes vs Weekdays**:
```{r}
ggplot(data = daily_all_merged, aes(x=ActivityDayNum, y=SedentaryMinutes)) + geom_bar(stat = "identity", fill="cornflowerblue") + labs(title = "Sedentary Minutes vs Weekdays", subtitle = "Mon = 1, Tue = 2, Wed = 3, Thu = 4, Fri = 5, Sat = 6, Sun = 7" )
```

In this graph we see total number of sedentary minutes the users spent throughout the weekdays. We notice that the users were the least active on Tuesdays, Wednesdays and Thursdays.


**Total Steps vs Calories**:
```{r}
ggplot(data = daily_all_merged, aes(x=TotalSteps, y=Calories)) + geom_point(stat = "identity", color="lightsalmon1") + geom_smooth(method = "lm") + labs(title = "Total Steps vs Calories" )
```

In this scatter plot, we see the total steps vs. the calories burned. Naturally, there is a clear relationship between the two, yet we see some interesting insights.


**Total Steps vs Total Distance**:
```{r}
ggplot(data = daily_all_merged, aes(x=TotalSteps, y=TotalDistance)) + geom_point(stat = "identity", color="tan1") + geom_smooth(method = "lm") + labs(title = "Total Steps vs Calories" )
```

In this plot we see a positive relation between total steps and total distance, as the number of steps increases so does the distance.


Total Steps vs Active Minutes:
First putting the Fairly active, lightly active, sedentary and very active minutes in a single data frame for visulization.

```{r}
ActiveMinutes <- gather(daily_all_merged, key = "ActiveMinutes", value = "Minutes", 11:14)
```

Formatting the names:
```{r}
ActiveMinutes$ActiveMinutes[ActiveMinutes$ActiveMinutes == "FairlyActiveMinutes"] <- "Fairly Active Min"
ActiveMinutes$ActiveMinutes[ActiveMinutes$ActiveMinutes == "VeryActiveMinutes"] <- "Very Active Min"
ActiveMinutes$ActiveMinutes[ActiveMinutes$ActiveMinutes == "LightlyActiveMinutes"] <- "Lightly Active Min"
ActiveMinutes$ActiveMinutes[ActiveMinutes$ActiveMinutes == "SedentaryMinutes"] <- "Sedentary Min"
```

```{r}
ggplot(data=ActiveMinutes, aes(x=TotalSteps, y = Minutes, color=ActiveMinutes)) + geom_point() + labs(title="Total Steps vs. Active Minutes") + 
  theme(legend.position="top") + theme(legend.title = element_blank())
```

In the plot we can see that majority of the data points come from users who take between 5 000 and 15 000 steps daily.
We also notice that that throughout the different categories of activity, users spend between 8 hours and 23hours 20 minutes (500 to 1400 minutes) sedentary.
Also, there are two clusters of time spent sedentary around 500 to 800 minutes (8 hours to 13 hours) and 1000 to 1400 min (16 hours to 23 hours).
In other words, there are two groups in terms of how much time users spend active: either roughly 11 to 16 hours, or between 40 minutes to 7 hours.


**Total Distance vs Days of the Week**:
```{r}
ggplot(data = daily_all_merged, aes(x=ActivityDayNum, y=TotalDistance)) + geom_bar(stat = "identity", fill="cornflowerblue") + labs(title = "Total Distance vs Days of the Week", subtitle = "Mon = 1, Tue = 2, Wed = 3, Thu = 4, Fri = 5, Sat = 6, Sun = 7" )
```


**Total Minutes Asleep vs Weekdays**:
```{r}
ggplot(data = daily_all_merged, aes(x=ActivityDay, y=TotalMinutesAsleep)) + geom_bar(stat = "identity", fill="cadetblue3") + labs(title = "Total Minutes Asleep vs Weekdays")
```

We see that people sleep the least on Monday, Friday and Saturday. And sleep the most on Tuesday and Wednesday


## Act
There were three main business questions which were focus of our analysis. My insight and recommendations regarding these questions is as follow:

1. What are some trends in smart device usage?

    - Average total steps by the users is 8515 which is below the recommended 10,000 steps.
    - Average BMI is 25.19 which is slightly above the healthy range (18.5 to 24.9) of BMI.
    - Average total minutes asleep of the average user is 419 minutes (approximately 6.9 hours), which is slightly less than the     recommended 7 or above hours of sleep for adults.
    - On average users spend at least 30 to 40 minutes in bed without asleep. They most likely use their smartphones or other        electronic devices using this time.


2. How could these trends apply to Bellabeat customers?

    - Based on the information we have Bellabeat could help people reach the recommended goal of 10,000 steps for health and fitness by using push notification to show them their current progress and encourage them to complete their goal.
    - Bellabeat can remind people through notifications on their chosen bedtime to go to sleep to sleep at least 7 hours of sleep.
    - Bellabeat can provide a summary to their users at the end of the week about their physical activity, sleep periods and any other habit that they are tracking through Bellabeat products.
    - Bellabeat can use their application to detect long periods of sedentary and remind people to perform some physical activity to stay active.
    - To be able to give even more answers, specificily for Bellabeat customers we need more data as the amount of data is low and the target audience of Bellabeat is female customers, so we need more data especially from female users.
 
 
3. How could these trends help influence Bellabeat marketing strategy?
    
    - Bellabeat can introduce and market a feature in which Bellabeat introduces a group or companion feature in their application, in which friends can set a target of physical activity or any other activity together and keep each other progress in check so that they can motivate each other.
    - Bellabeat can introduce reward-point system in which when user completes certain tasks they earn points and they can use those points to earn different rewards like discount on subscription/products or some other reward.
    - As the main target of Bellabeat are female customers, Bellabeat can design their wearable products in a more fashionable way, so it is attractive for the customers and more fashionable.